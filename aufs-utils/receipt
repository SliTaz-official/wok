# SliTaz package receipt.

PACKAGE="aufs-utils"
VERSION="20090928"
CATEGORY="system-tools"
SHORT_DESC="The aufs utils."
MAINTAINER="pankso@slitaz.org"
DEPENDS="linux-aufs"
WEB_SITE="http://aufs.sourceforge.net/"

# Rules to configure and make the package.
compile_rules()
{
	[ -d "$PACKAGE-$VERSION" ] && rm -rf $PACKAGE-$VERSION
	git clone http://git.c3sl.ufpr.br/pub/scm/aufs/aufs2-util.git \
		$PACKAGE-$VERSION
	KERNEL_VERSION=`grep  ^VERSION= $WOK/linux/receipt | cut -d "=" -f2 | sed -e 's/"//g'`
	if [ ! -d $WOK/linux/linux-$KERNEL_VERSION ]; then
        	tazwok cook linux
	fi
	cd $src
	sed -i 's/-m 644 -T/-m 644/' Makefile
	make KDIR=$WOK/linux/linux-$KERNEL_VERSION && 
	make KDIR=$WOK/linux/linux-$KERNEL_VERSION DESTDIR=$PWD/_pkg install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr
	cp -a $_pkg/sbin $fs
	cp -a $_pkg/usr/bin $fs/usr
}
