# SliTaz package receipt.

PACKAGE="xl2tpd"
VERSION="1.2.4"
CATEGORY="network"
SHORT_DESC="Layer 2 Tunneling Protocol (L2TP) daemon."
MAINTAINER="pascal.bellard@slitaz.org"
LICENSE="GPL2"
TARBALL="$PACKAGE-$VERSION.tar.gz"
WEB_SITE="https://www.xelerance.com/software/xl2tpd"
WGET_URL="$WEB_SITE/$TARBALL"
TAGS="vpn tunnel"
CONFIG_FILES="/etc/xl2tpd"

DEPENDS="libpcap"
BUILD_DEPENDS="libpcap-dev"

# Rules to configure and make the package.
compile_rules()
{
	sed -i 's/-lpcap \$(LDLIBS) -o pfc pfc.o/$(LDLIBS) -o pfc pfc.o -lpcap/' Makefile
	make PREFIX=/usr DESTDIR=$DESTDIR install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr $fs/etc/xl2tpd $fs/var/run/xl2tpd
	cp -a $src/doc $install/usr/share/
	rm $install/usr/share/doc/*.?
	cp -a $src/?[A-Z]* $src/examples $install/usr/share/doc
	cp -a $install/usr/bin $fs/usr
	cp -a $install/usr/sbin $fs/usr
}
