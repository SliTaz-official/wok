# SliTaz package receipt.

PACKAGE="slitaz-tools"
VERSION="1.4"
CATEGORY="extra"
SHORT_DESC="SliTaz tools provide Tazlito and Tinyutils."
MAINTAINER="pankso@slitaz.org"
DEPENDS="slitaz-boot-scripts dialog"
TARBALL="$PACKAGE-$VERSION.tar.gz"
WEB_SITE="http://www.slitaz.org/"
WGET_URL="http://download.tuxfamily.org/slitaz/sources/tools/$TARBALL"

# Rules to gen a SliTaz package suitable for Tazpkg.
#
# This package is all build by genpkg, it provide /usr/share/examples tree,
# tazlito, tinyutils, licenses, documentation and artwork. This package
# provide also the Firewall deamon/config (/etc/firewall.conf).
#
genpkg_rules()
{
	mkdir -p $fs/sbin $fs/usr/bin $fs/usr/sbin $fs/var/spool/cron/crontabs
	
	# /rootfs/*. Firewall exemples, licenses and pixmaps.
	cp -a $src/rootfs/* $fs

	# Tinyutils.
	#
	cp -a $src/tinyutils/tazlocale $fs/sbin
	cp -a $src/tinyutils/tazkmap $fs/sbin
	cp -a $src/tinyutils/gztazmod.sh $fs/sbin
	cp -a $src/tinyutils/tazx $fs/usr/bin
	cp -a $src/tinyutils/startx $fs/usr/bin
	cp -a $src/tinyutils/mountbox $fs/usr/bin
	
	# Sound config
	cp -a $src/tinyutils/soundconf $fs/usr/sbin
	
	# Installer script (beta)
	cp -a $src/tinyutils/slitaz-installer.sh $fs/usr/bin
	
	chown -R root.root $fs
	chmod -R 755 $fs/usr/bin
	chmod -R 755 $fs/sbin

	# Tools doc in /usr/share/doc/slitaz-tools
	# Cooking info in /usr/share/doc/slitaz with style and images.
	#
	mkdir -p $fs/usr/share/doc/slitaz $fs/usr/share/doc/slitaz-tools
	cp $src/doc/tazx.txt $fs/usr/share/doc/slitaz-tools
	cp -a $src/doc/images $fs/usr/share/doc/slitaz
	cp $src/doc/style.css $fs/usr/share/doc/slitaz
	cp $src/doc/cooking-info.html $fs/usr/share/doc/slitaz
}

# Remove obsolet file installed with slitaz-tools-1.3
pre_install()
{
	local root
	root=$1
	rm -rf $root/etc/slitaz-tools
	rm -rf $root/usr/share/doc/slitaz-tools
}
