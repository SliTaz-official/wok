# SliTaz package receipt.

PACKAGE="slitaz-tools"
VERSION="2.3"
CATEGORY="system-tools"
SHORT_DESC="SliTaz tools provide installer and Tinyutils."
MAINTAINER="pankso@slitaz.org"
DEPENDS="slitaz-boot-scripts dialog"
TARBALL="$PACKAGE-$VERSION.tar.gz"
WEB_SITE="http://www.slitaz.org/"
WGET_URL="http://download.tuxfamily.org/slitaz/sources/tools/$TARBALL"

# Rules to gen a SliTaz package suitable for Tazpkg.
#
# This package is all build by genpkg, it provide /usr/share/examples tree,
# tazlito, tinyutils, licenses, documentation and artwork. This package
# provide also the Firewall deamon/config (/etc/firewall.conf).
#
genpkg_rules()
{
	mkdir -p \
		$fs/sbin \
		$fs/usr/bin \
		$fs/usr/sbin \
		$fs/var/spool/cron/crontabs \
		$fs/usr/lib/slitaz \
		$fs/usr/share/doc/slitaz-tools/glade \
		$fs/usr/share/slitaz-tools/installer

	# /rootfs/*. Firewall exemples, licenses and pixmaps.
	cp -a $src/rootfs/* $fs

	# Tinyutils.
	cp -a $src/tinyutils/tazlocale $fs/sbin
	cp -a $src/tinyutils/tazkeymap $fs/sbin
	cp -a $src/tinyutils/gztazmod.sh $fs/sbin
	cp -a $src/tinyutils/tazfile $fs/usr/bin
	cp -a $src/tinyutils/tazx $fs/usr/bin
	cp -a $src/tinyutils/startx $fs/usr/bin
	cp -a $src/tinyutils/history $fs/usr/bin
	# Sound config
	cp -a $src/tinyutils/soundconf $fs/usr/sbin
	cp -a $src/tinyutils/setmixer $fs/usr/sbin

	# Gtkdialog boxes
	cp -a $src/tinyutils/bootfloppybox $fs/usr/bin
	cp -a $src/tinyutils/burnbox $fs/usr/bin
	cp -a $src/tinyutils/mountbox $fs/usr/bin
	cp -a $src/tinyutils/netbox $fs/usr/bin
	cp -a $src/tinyutils/scpbox $fs/usr/bin
	cp -a $src/tinyutils/subox $fs/usr/bin
	cp -a $src/tinyutils/torrentbox $fs/usr/bin
	cp -a $src/tinyutils/desktopbox $fs/usr/bin
	# Tazlito Box --> tazlito ??
	cp -a $src/tinyutils/tazlitobox $fs/usr/bin

	# Libs
	cp -a $src/lib/[a-z]* $fs/usr/lib/slitaz

	# Glade XML files (for now only declare for calendar so tazpkg check
	# is happy...)
	touch $fs/usr/share/doc/slitaz-tools/glade/calendar.glade
	#cp -a $src/glade/*.glade $fs/usr/share/slitaz-tools/glade

	# *.desktop
	cp -a $src/stuff/desktop-files $fs/usr/share/applications

	# Installer's
	cp -a $src/installer/slitaz-installer $fs/usr/bin
	cp -a $src/installer/*.msg $fs/usr/share/slitaz-tools/installer

	# Tools doc in /usr/share/doc/slitaz-tools
	cp $src/doc/tazx.txt $fs/usr/share/doc/slitaz-tools

	# Gksu fake for pcmanfm
	cd $fs/usr/bin
	ln -s subox gksu
	cd $WOK/$PACKAGE

	# Declare /etc/X11/screen.conf
	#
	# At the moment if /etc/X11/screen.conf exist there is no
	# screen config with tazx in Live mode.
	#
	#mkdir -p $fs/etc/X11
	#touch $fs/etc/X11/screen.conf

	chown -R root.root $fs
	chmod -R 755 $fs/usr/bin
	chmod -R 755 $fs/sbin
}
