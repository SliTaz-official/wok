# SliTaz package receipt.

PACKAGE="firefox-langpack-fr"
VERSION="3.6.13"
CATEGORY="network"
SHORT_DESC="France Language Package for firefox"
MAINTAINER="lufeng369@gmail.com"
DEPENDS="firefox"
WEB_SITE="http://www.mozilla.com"
SOURCE="firefox"
LANG=`echo $PACKAGE | cut -d'-' -f3 | tr '_' '-'`
LANG_DIR="langpack-$LANG@firefox.mozilla.org"
TARBALL="$LANG.xpi"
URL="http://releases.mozilla.org/pub/mozilla.org/firefox/releases/$VERSION/linux-i686/xpi/$TARBALL"

# Rules to gen a SliTaz package suitable for Tazpkg.
compile_rules()
{
	cd $WOK/$PACKAGE
        mkdir -p $LANG_DIR

	# Get xpi
	if [ -f $SOURCES_REPOSITORY/$PACKAGE-$VERSION.xpi ]; then
		echo "Using current langpack ($PACKAGE-$VERSION.xpi)"
	else
		echo "Downloading langpack ($PACKAGE-$VERSION.xpi)"
	        wget -O $SOURCES_REPOSITORY/$PACKAGE-$VERSION.xpi $URL
	fi
	# Uncompress
	echo -n "Uncompressing langpack ($PACKAGE-$VERSION.xpi)"
	mkdir -p $LANG_DIR && unzip $SOURCES_REPOSITORY/$PACKAGE-$VERSION.xpi -d $LANG_DIR
	status
        
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	EXTDIR="$fs/usr/lib/$SOURCE-$VERSION/extensions"
	mkdir -p $EXTDIR
	cp -a $LANG_DIR $EXTDIR
}

post_install()
{
	echo ""
	echo "Use the code below to change locale of firefox in shell:"
	echo "sed -i '/pref/s/en-US/$LANG/' /etc/firefox/pref/firefox-l10n.js"
	echo ""
}

