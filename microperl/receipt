# SliTaz package receipt.

PACKAGE="microperl"
VERSION="5.8.8"
CATEGORY="development"
SHORT_DESC="A micro version of Perl."
MAINTAINER="pankso@slitaz.org"
WANTED="perl"
WEB_SITE="http://www.perl.org/"

# Rules to configure and make the package.
#
# Microperl is a special package. We need to sed uconfig.sh and
# regenerate the Makefile.micro to modify the configuration.
#
compile_rules()
{
	cd $src
	# Install in /usr (default is /usr/local).
	sed -i s/'usr\/local'/'usr'/ uconfig.sh
	# Sed to search mods in /usr/lib/perl5.
	sed -i s/'perl5\/5.9'/'perl5'/ uconfig.sh
	# Optimisation.
	sed -i s/'unknown'/'i486-pc-linux-gnu'/ uconfig.sh
	# Make it!
	make -f Makefile.micro regen_uconfig
	make -f Makefile.micro
	strip microperl
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/bin
	cp -a $src/microperl $fs/usr/bin
}
