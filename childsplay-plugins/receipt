# SliTaz package receipt.

PACKAGE="childsplay-plugins"
SOURCE="childsplay_plugins"
VERSION="0.90"
CATEGORY="games"
SHORT_DESC="Extra games for childsplay."
MAINTAINER="claudinei@slitaz.org"
TARBALL="$SOURCE-$VERSION.tgz"
WEB_SITE="http://www.childschool.org"
WGET_URL="$SF_MIRROR/childsplay/$TARBALL"
DEPENDS="python childsplay"
BUILD_DEPENDS="$DEPENDS"

# Rules to configure and make the package.
compile_rules()
{
	cd $src
	patch -p1 -i ../stuff/install.sh.patch	
	sh install.sh
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr $fs/usr/share $fs/var/games
	cp -a $_pkg/usr/bin $fs/usr
	cp -a $_pkg/usr/lib $fs/usr
	cp -a $_pkg/usr/share/assetml $fs/usr/share
	cp -a $_pkg/usr/share/childsplay $fs/usr/share
	cp -a $_pkg/usr/share/childsplay/Data/childsplay.score \
		$fs/var/games
}

# Remove the original childsplay.score file and write the new one
post_install()
{
	VARDIR="/var/games"
	DATADIR="/usr/share/childsplay/Data"
	SCOREFILE="childsplay.score"
	if [ -f $VARDIR/$SCOREFILE ] 
	then
		rm $DATADIR/$SCOREFILE
		ln -s $VARDIR/$SCOREFILE $DATADIR/$SCOREFILE
	fi
}	
