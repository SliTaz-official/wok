# SliTaz package receipt.

PACKAGE="pidgin-facebookchat"
VERSION="1.63"
CATEGORY="network"
SHORT_DESC="Facebook chat plugin for Pidgin and libpurple messengers."
MAINTAINER="mallory@skyrock.com"
SOURCE="pidgin-facebookchat"
DEPENDS="pidgin zip json-glib"
BUILD_DEPENDS="libpurple-dev json-glib-dev"
TARBALL="$PACKAGE-source-$VERSION.tar.bz2"
WEB_SITE="http://code.google.com/p/pidgin-facebookchat/"
WGET_URL="http://$PACKAGE.googlecode.com/files/$TARBALL"

# Rules to configure and make the package.
compile_rules()
{
	src=$WOK/$PACKAGE/$PACKAGE
	cd $src
	mv Makefile Makefile.orig
	sed -e 's/i686-pc-linux-gnu-gcc/gcc/' < Makefile.orig > Makefile
	make libfacebook.so
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/lib/purple-2
	cp -a $PACKAGE/libfacebook.so $fs/usr/lib/purple-2
	
	# Pidgin icons
	mkdir -p $fs/usr/share/pixmaps/pidgin/protocols
	[ -f $SOURCES_REPOSITORY/facebook_icons.zip ] || \
	wget http://pidgin-facebookchat.googlecode.com/files/facebook_icons.zip
	mkdir facebook_icons
	unzip -o $SOURCES_REPOSITORY/facebook_icons.zip \
		-d $fs/usr/share/pixmaps/pidgin/protocols	
}

# clean commands for Tazwok.
clean_wok()
{
	rm -rf $WOK/$PACKAGE/$PACKAGE
	rm -rf $WOK/$PACKAGE/facebook_icons*
}

