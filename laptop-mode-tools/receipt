# SliTaz package receipt.

PACKAGE="laptop-mode-tools"
VERSION="1.72.2"
CATEGORY="system-tools"
SHORT_DESC="Laptop ACPI tools."
MAINTAINER="lufeng369@slitaz.org"
LICENSE="GPL2"
WEB_SITE="https://github.com/rickysarraf/laptop-mode-tools"

TARBALL="${PACKAGE}_$VERSION.tar.gz"
WGET_URL="https://github.com/rickysarraf/$PACKAGE/releases/download/$VERSION/$TARBALL"

DEPENDS="acpid hdparm util-linux-flock util-linux-blockdev"

# Rules to configure and make the package.
compile_rules()
{
	sed -i 's|/usr/man|/usr/share/man|' install.sh
	make DESTDIR=$DESTDIR INIT_D=none install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/sbin/
	mkdir -p $fs/etc/init.d/
	mkdir -p $fs/lib

	cp -a $install/usr/sbin/laptop_mode	$fs/usr/sbin/
	cp -a $stuff/laptop-mode.sh		$fs/etc/init.d/
	cp -a $install/etc/acpi			$fs/etc/
	cp -a $install/etc/apm			$fs/etc/
	cp -a $install/etc/laptop-mode		$fs/etc/
	cp -a $install/etc/power		$fs/etc/
	cp -a $install/lib/udev			$fs/lib/
	cp -a $install/usr/lib/			$fs/usr/
}
