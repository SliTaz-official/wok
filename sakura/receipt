# SliTaz package receipt

PACKAGE="sakura"
VERSION="2.4.2"
CATEGORY="utilities"
SHORT_DESC="Lightweight GTK+/vte Terminal"
MAINTAINER="pankso@slitaz.org"
LICENSE=""
WEB_SITE="http://www.pleyades.net/david/projects/sakura"
TARBALL="$PACKAGE-$VERSION.tar.bz2"
WGET_URL="https://launchpad.net/sakura/trunk/$VERSION/+download/$TARBALL"
HOST_ARCH="i486 arm"

DEPENDS="gtk+ vte xorg-libXdamage xorg-libXi"
BUILD_DEPENDS="gtk+-dev vte-dev xorg-libXdamage-dev xorg-libXi-dev"

# Handle cross compilation.
case "$ARCH" in
	i?86) BUILD_DEPENDS="$BUILD_DEPENDS gettext cmake wget" ;;
esac

# Rules to configure and make the package.
compile_rules()
{
	sed -i 's/terminal-tango.svg/terminal-tango.png/' src/sakura.c &&
	cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=RELEASE . &&
	sed -i 's/$/ -lncurses/' CMakeFiles/sakura.dir/link.txt &&
	sed -i 's/-u//' CMakeLists.txt &&
	sed -i 's/-u//' CMakeFiles/man.dir/build.make &&
	make &&
	make DESTDIR=$DESTDIR install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr
	cp -a $install/usr/bin $fs/usr
}

