# SliTaz package receipt.

PACKAGE="memtest"
VERSION="2.10"
CATEGORY="base-system"
SHORT_DESC="Memory failures detection tool."
MAINTAINER="pascal.bellard@slitaz.org"
TARBALL="$PACKAGE-$VERSION.tar.bz2"
WEB_SITE="http://www.memtest.org/"
RAW_WGET_URL="http://www.memtest.org/download/$VERSION/memtest86+-$VERSION.bin.gz"

# Rules to configure and make the package.
compile_rules()
{
    [ -f $(basename $RAW_WGET_URL) ] || wget $RAW_WGET_URL
} 


# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
    mkdir -p  $fs/usr/share/boot
    zcat $(basename $RAW_WGET_URL) | lzma e $fs/usr/share/boot/memtest.lzma -si
}

# Pre and post install commands for Tazpkg.
post_install()
{
	echo "----"
	echo "You can create memtest boot floppy with:"
	echo "# unlzma -c /usr/share/boot/memtest.lzma > /dev/fd0"
	echo "----"
}
