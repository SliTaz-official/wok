# SliTaz package receipt.

PACKAGE="sqlite"
VERSION="3.7.2"
CATEGORY="office"
SHORT_DESC="Small SQL database engine."
MAINTAINER="pankso@slitaz.org"
TARBALL="$PACKAGE-$VERSION.tar.gz"
BUILD_DEPENDS="tcl"
WEB_SITE="http://www.sqlite.org/"
WGET_URL="http://www.sqlite.org/$TARBALL"

# Rules to configure and make the package.
compile_rules()
{
	cd $src
	./configure \
		--prefix=/usr \
		--disable-tcl \
		--disable-readline \
		--enable-load-extension \
		LDFLAGS=-ldl \
		$CONFIGURE_ARGS &&
	sed -i 's|^hardcode_libdir_flag_spec=.*|hardcode_libdir_flag_spec=""|g' libtool &&
  	sed -i 's|^runpath_var=LD_RUN_PATH|runpath_var=DIE_RPATH_DIE|g' libtool &&
	make &&
	make DESTDIR=$PWD/_pkg install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/lib
	cp -a $_pkg/usr/lib/*.so* $fs/usr/lib
	cp -a $_pkg/usr/bin $fs/usr
}
