# SliTaz package receipt.

PACKAGE="xfree86-Xvesa"
VERSION="4.6.0"
CATEGORY="x-window"
SHORT_DESC="Xvesa Tiny Xserver from XFree86."
MAINTAINER="pankso@slitaz.org"
WEB_SITE="http://www.xfree86.org/"

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	# Download and untar all tiny Xserver.
	if [ ! -f "$SOURCES_REPOSITORY/Xtinyx.tgz" ] ; then
		cd $SOURCES_REPOSITORY
	    echo "Downloading Xtinyx servers..."
	    wget http://ftp.xfree86.org/pub/XFree86/$VERSION/binaries/Linux-ix86-glibc23/Xtinyx.tgz
	    cd $WOK/$PACKAGE
	fi
	if [ ! -d "bin" ] ; then
	    echo "Untaring XFree86 precompiled package..."
	    tar xzf $SOURCES_REPOSITORY/Xtinyx.tgz -C .
	fi
	# Do the pkg fs.
	mkdir -p $fs/usr/bin
	cp bin/Xvesa $fs/usr/bin
	strip $fs/usr/bin/Xvesa
	chmod 4711 $fs/usr/bin/Xvesa
	# Remove bin dir.
	rm -rf bin
}
