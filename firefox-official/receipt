# SliTaz package receipt.

PACKAGE="firefox-official"
VERSION="42.0"
CATEGORY="network"
SHORT_DESC="Official Firefox build by the Mozilla foundation."
MAINTAINER="pankso@slitaz.org"
LICENSE="MPL2"
WEB_SITE="http://www.mozilla.org/firefox"
TARBALL="firefox-$VERSION.tar.bz2"
WGET_URL="http://ftp.mozilla.org/pub/mozilla.org/firefox/releases/$VERSION/linux-i686/en-US/$TARBALL"
TAGS="web-browser"
HOST_ARCH="i486"

DEPENDS="gtk+"

# Rules to configure and make the package.
compile_rules()
{
	mkdir -p \
		$install/usr/bin \
		$install/usr/lib/firefox-$VERSION \
		$install/usr/share/icons/hicolor/128x128/apps

	cp -a $src/* $install/usr/lib/firefox-$VERSION

	# /usr/bin/firefox-official + pixmap
	ln -s /usr/lib/firefox-$VERSION/firefox $install/usr/bin/$PACKAGE
	ln -s /usr/lib/firefox-$VERSION/browser/icons/mozicon128.png \
		$install/usr/share/icons/hicolor/128x128/apps/$PACKAGE.png

	# Remove updater files (users can't upgrade anyway)
	rm -f $install/usr/lib/firefox-$VERSION/update*
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	cp -a $install/* $fs
}
