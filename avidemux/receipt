# SliTaz package receipt.

PACKAGE="avidemux"
VERSION="2.5.1"
CATEGORY="multimedia"
SHORT_DESC="free video editor"
MAINTAINER="allan316@gmail.com"
DEPENDS="libsdl alsa-lib libsdl-gfx libxml2 xorg-libXv gtk+ cairo libQtGui"
BUILD_DEPENDS="cmake alsa-lib-dev libsdl-dev libsdl-gfx-dev"
TARBALL="avidemux_$VERSION.tar.gz"
WEB_SITE="http://fixounet.free.fr/$PACKAGE"
WGET_URL="http://download.berlios.de/$PACKAGE/$TARBALL"
TAGS="video movie editor avi mpeg mp4"

# Rules to configure and make the package.
compile_rules()
{
	[ -L /usr/bin/patch ] && tazpkg get-install patch --forced
	mkdir $WOK/$PACKAGE/avidemux-$VERSION
	mv $WOK/$PACKAGE/avidemux_$VERSION $WOK/$PACKAGE/avidemux-$VERSION/src
	cd $src
	mkdir built
	cd built
	cmake -DCMAKE_INSTALL_PREFIX=/usr ../src
	make && make DESTDIR=$PWD/../_pkg install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/lib $fs/usr/share
	cp -a $_pkg/usr/bin $fs/usr
	cp -a $_pkg/usr/lib/*.so* $fs/usr/lib
	cp -a $_pkg/usr/share/ADM_scripts $fs/usr/share
}
