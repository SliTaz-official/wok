# SliTaz package receipt.

PACKAGE="kbd-base"
VERSION="1.15.3"
CATEGORY="base-system"
SHORT_DESC="Keyboard maping definitions and loadkeys utility."
MAINTAINER="pankso@slitaz.org"
WANTED="kbd"
WEB_SITE="http://kbd-project.org/"
HOST_ARCH="i486 arm"

# Make sure it will run on host or no keyboard support...
testsuite()
{
	readelf -h $install/usr/bin/loadkeys
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/bin
	cp -a $install/usr/bin/loadkeys $fs/bin
	# Dirs
	for dir in dvorak azerty qwerty qwertz; do
		mkdir -p $fs/usr/share/kbd/keymaps/i386/$dir
	done
	# i386 keymaps only.
	for keymap in $(cat $stuff/keymaps-path.list)
	do
		cp -a $install/usr/share/kbd/keymaps/i386/$keymap \
			$fs/usr/share/kbd/keymaps/i386/$keymap
	done
	# Include files
	cp -a $install/usr/share/kbd/keymaps/include \
		$fs/usr/share/kbd/keymaps
	cp -a $install/usr/share/kbd/keymaps/i386/include \
		$fs/usr/share/kbd/keymaps/i386/include
}

