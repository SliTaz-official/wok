# SliTaz package receipt.

PACKAGE="portmap"
VERSION="6.0"
CATEGORY="network"
SHORT_DESC="RPC portmapper"
MAINTAINER="Erjo <erjo@slitaz.org>"
DEPENDS=""
TARBALL="${PACKAGE}-${VERSION}.tgz"
WEB_SITE="http://neil.brown.name/portmap/"
WGET_URL="http://neil.brown.name/portmap/$TARBALL"


# rules to configure and make the package.
compile_rules()
{
	# Ovewriting default $src definition
	
	src=${PACKAGE}_${VERSION}	
	cd $src
	
	# Build 
	# Disabling TCP_WRAPPER with NO_TCP_WRAPPER variable
	NO_TCP_WRAPPER=1  make
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	src=${PACKAGE}_${VERSION}	
	_pkg=${PACKAGE}_${VERSION}/_pkg	
	

	mkdir -p $fs/usr/sbin
	cp -a $src/pmap_dump $fs/usr/sbin
	cp -a $src/pmap_set $fs/usr/sbin
	cp -a $src/portmap $fs/usr/sbin

	strip -s $fs/usr/sbin/*
	
	mkdir -p $fs/etc/init.d
	install -g root -o root -m 0755 stuff/init.d/portmap $fs/etc/init.d
	
	
}


post_install()
{
	# Post message when installing.
	echo -e "\nTo starts $PACKAGE server you can run :\n"
        echo "/etc/init.d/$PACKAGE start"
	echo -e "Or add $PACKAGE to RUN_DAEMONS in /etc/rcS.conf\n"
	                        
}
