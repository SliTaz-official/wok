#!/bin/sh
# /etc/init.d/mpd: Start, stop and restart mpd deamon on SliTaz, at boot
# time or with the command line.
#
# To start daemon at boot time, just put the right name in the $RUN_DAEMONS
# variable of /etc/rcS.conf and configure options with /etc/mpd.conf.
#
. /etc/init.d/rc.functions

NAME=mpd
DESC="Music Player Daemon"
DAEMON=/usr/sbin/mpd
OPTION="/etc/mpd.conf"
PIDFILE="/var/run/mpd.pid"

case "$1" in
start)
	if active_pidfile $PIDFILE mpd ; then
		echo "$NAME already running."
		exit 1
	fi
	echo -n "Starting $DESC: $NAME... "
	$DAEMON $OPTION 2> /dev/null
	status
	pidof $NAME > $PIDFILE
	;;
stop)
	if ! active_pidfile $PIDFILE mpd ; then
		echo "$NAME is not running."
		exit 1
	fi
	echo -n "Stopping $DESC: $NAME... "
	kill $(pidof $NAME)
	status
	;;
restart)
	if ! active_pidfile $PIDFILE mpd ; then
		echo "$NAME is not running."
		exit 1
	fi
	echo -n "Restarting $DESC: $NAME... "
	kill $(pidof $NAME)
	sleep 2
	$DAEMON $OPTION 2> /dev/null
	status
	;;
*)
	echo ""
	echo -e "\033[1mUsage:\033[0m /etc/init.d/$(basename $0) [start|stop|restart]"
	echo ""
	exit 1
	;;
esac

exit 0
