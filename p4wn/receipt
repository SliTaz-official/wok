# SliTaz package receipt.

PACKAGE="p4wn"
VERSION="1.0"
CATEGORY="games"
SHORT_DESC="Chess game in javascript"
MAINTAINER="pascal.bellard@slitaz.org"
WEB_SITE="http://p4wn.sourceforge.net/"
TARBALL="sven_vehars_fancy_version.zip"

# Rules to configure and make the package.
compile_rules()
{
	mkdir $src
	cd $src
	[ -s $SOURCES_REPOSITORY/$TARBALL ] ||
	wget $WEB_SITE/downloads/$TARBALL -P $SOURCES_REPOSITORY
	[ -s index.html ] || unzip $SOURCES_REPOSITORY/$TARBALL
	sed -i '/background-image/d' *.css
	sed -i 's|title>.*</title|title>Chess</title|' index.html
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
        mkdir -p $fs/var/www/chess $fs/usr/share/applications
	cp $src/* $fs/var/www/chess
	rm -f $fs/var/www/chess/README $fs/var/www/chess/*background.png
	chown -R 80.80 $fs/var/www/chess
	cat > $fs/usr/share/applications/chess.desktop <<EOT
[Desktop Entry]
Type=Application
Name=Chess
Exec=browser file:///var/www/chess/index.html
Icon=/var/www/chess/2.gif
Terminal=false
Categories=Game;
Comment=Chess game
EOT
}

