# SliTaz package receipt.

PACKAGE="libcap"
VERSION="2.10"
CATEGORY="system-tools"
SHORT_DESC="Support for getting/setting POSIX.1e capabilities."
MAINTAINER="pankso@slitaz.org"
DEPENDS="linux"
BUILD_DEPENDS="gperf pam-dev"
TARBALL="$PACKAGE-$VERSION.tar.gz"
WEB_SITE="http://www.kernel.org/pub/linux/libs/security/linux-privs/"
WGET_URL="${WEB_SITE}libcap2/$TARBALL"

# Rules to configure and make the package.
compile_rules()
{
	if [ ! -d $WOK/linux/taz ]; then
		tazwok cook linux
	fi
	cd $src
	sed -i -e s/'\\n'/"' -e '1i"/g -e 's/| indent -kr//' libcap/Makefile
	mkdir libcap/include/attr
	ln -s $WOK/linux/$(ls $WOK/linux/taz)/)/include/linux/xattr.h \
		libcap/include/attr/
	make &&
	make FAKEROOT=$PWD/_pkg install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/lib
	cp -a $_pkg/lib/lib* $fs/lib
	cp -a $_pkg/sbin $fs
}
