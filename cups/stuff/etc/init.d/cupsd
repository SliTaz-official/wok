#!/bin/sh
# /etc/init.d/cups: Start, stop and restart CUPS deamon on SliTaz, at boot
# time or with the command line.
#
# To start daemon at boot time, add 'cupsd' to the $RUN_DAEMONS variable
# of /etc/rcS.conf and configure options with /etc/daemons.conf.
#
. /etc/init.d/rc.functions
. /etc/daemons.conf

NAME=Cupsd
DESC="cups deamon"
DAEMON=/usr/sbin/cupsd
OPTIONS=$CUPSD_OPTIONS
PIDFILE=/var/run/cups/cups.sock

case "$1" in
	stop)
		action 'Stopping $DESC: $NAME... '
		kill $(pgrep -f cupsd)
		sleep 2
		[ -e /var/run/cups/cups.sock ] && rm -f $PIDFILE
		status
		;;
	start)
		if ! active_pidfile $PIDFILE cupsd 2>/dev/null; then
			action 'Starting $DESC: $NAME... '
			$DAEMON $OPTIONS
			status
		else
			action 'Not starting $DESC: $DESC is already running'
			false; status
		fi
		;;
	*)
		emsg "<n><b>Usage:</b> /etc/init.d/$(basename $0) [start|stop]"
		newline
		exit 1
		;;
esac

exit 0
