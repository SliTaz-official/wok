# SliTaz package receipt.

PACKAGE="apache-mod-perl"
VERSION="2.0.7"
CATEGORY="network"
SHORT_DESC="PERL module for Apache"
MAINTAINER="erjo@slitaz.org"
LICENSE="Apache"
SOURCE="mod_perl"
TARBALL="$SOURCE-$VERSION.tar.gz"
WEB_SITE="http://perl.apache.org/"
WGET_URL="http://perl.apache.org/dist/$TARBALL"

DEPENDS="apache"
BUILD_DEPENDS="perl gdbm-dev apache-dev apr-dev apr-util-dev apache"

# Rules to configure and make the package.
compile_rules()
{
	cd $src
	sed -i 's/c->remote_ip/r->useragent_ip/' \
		src/modules/perl/modperl_interp.c
	perl Makefile.PL MP_APXS=/usr/bin/apxs \
			 MP_APR_CONFIG=/usr/bin/apr-1-config &&
	make &&
	make DESTDIR=$DESTDIR install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/share
	cp -a $install/usr/bin $fs/usr
	cp -a $install/usr/lib $fs/usr
	cp -a $install/usr/share/apache $fs/usr/share
	
}

