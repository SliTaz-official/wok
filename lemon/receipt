# SliTaz package receipt.

PACKAGE="lemon"
VERSION="3.7.3"
CATEGORY="system-tools"
SHORT_DESC="The LEMON Parser Generator (from the SQLite project)."
MAINTAINER="pankso@slitaz.org"
WANTED="sqlite"
WEB_SITE="http://www.sqlite.org/"

# Rules to configure and make the package.
compile_rules()
{
	mkdir -p sqlite-$VERSION && cd sqlite-$VERSION
	cp $src/tool/lemon.c .
	cp $src/tool/lempar.c .
	sed -i -e 's!lempar.c!/usr/share/lemon/lempar.c!' lemon.c
	echo -n "Compiling lemon..."
	gcc -o lemon lemon.c && status
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	
	mkdir -p $fs/usr/bin $fs/usr/share/lemon
	if [ ! -d sqlite-$VERSION ]; then
		tazwok compile $PACKAGE
		cp sqlite-$VERSION/lemon $fs/usr/bin
		cp sqlite-$VERSION/lempar.c $fs/usr/share/lemon
	elif [ -d sqlite-$VERSION ]; then
		cp sqlite-$VERSION/lemon $fs/usr/bin
		cp sqlite-$VERSION/lempar.c $fs/usr/share/lemon
	fi
}
