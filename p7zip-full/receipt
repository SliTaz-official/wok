# SliTaz package receipt.

PACKAGE="p7zip-full"
SOURCE="p7zip"
VERSION="4.58"
CATEGORY="utilities"
SHORT_DESC="A file archiver with a high compression ratio (full version with restricted codecs)"
MAINTAINER="milka@konstelacioj.info"
TARBALL="${SOURCE}_${VERSION}_src_all.tar.bz2"
WEB_SITE="http://p7zip.sourceforge.net/"
WGET_URL="$SF_MIRROR/$SOURCE/$TARBALL"

# Rules to configure and make the package.
compile_rules()
{
	mv "$SOURCE"_"$VERSION" $src
	cd $src
	make all3
	make DEST_HOME=$PWD/_pkg/usr install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr
	cp -a $_pkg/usr/bin $fs/usr
	cp -a $_pkg/usr/lib $fs/usr
	
	# Fix pathname in 7z scripts
	sed -i -e "s#$_pkg##" $fs/usr/bin/7z 
	sed -i -e "s#$_pkg##" $fs/usr/bin/7za
	sed -i -e "s#$_pkg##" $fs/usr/bin/7zr
}

