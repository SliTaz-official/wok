# SliTaz package receipt.

PACKAGE="xfsprogs"
VERSION="4.14.0"
CATEGORY="system-tools"
SHORT_DESC="Utilities for making, mounting, and manipulating XFS file-system"
MAINTAINER="patel@math.uga.edu"
LICENSE="GPL3"
TARBALL="$PACKAGE-$VERSION.tar.xz"
WEB_SITE="http://oss.sgi.com/projects/xfs/"
WGET_URL="https://www.kernel.org/pub/linux/utils/fs/xfs/xfsprogs/$TARBALL"

DEPENDS="e2fsprogs"
BUILD_DEPENDS="e2fsprogs-dev libtool gettext util-linux-blkid-dev util-linux-uuid util-linux-uuid-dev"

# Rules to configure and make the package.
compile_rules()
{
	sed -i 's/--best -c/-9 -c/' include/buildmacros
	sed -i -e  's/lt_shell_append=yes/lt_shell_append=no/' \
		-e 's/DDEBUG/DNODEBUG/' configure
	./configure \
		$CONFIGURE_ARGS || return 1
	sed -i 's/--best/-9/' doc/Makefile Makefile
	make &&
	make DIST_ROOT=$DESTDIR install
} 

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/lib
	cp -a $install/usr/sbin $fs/usr
	cp -a $install/lib $fs
	cp -a $install/sbin $fs
}
