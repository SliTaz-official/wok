# SliTaz package receipt.

PACKAGE="glibc-base"
VERSION="2.9"
CATEGORY="base-system"
SHORT_DESC="GNU libc minimal libraries for SliTaz based system."
WEB_SITE="http://www.gnu.org/software/libc/"
WANTED="glibc"
MAINTAINER="pankso@slitaz.org"

# Make deps on French locale for a while
DEPENDS="locale-fr"

# Rules to gen a SliTaz package suitable for Tazpkg.
#
# Full glibc is very long to compile (see package glibc for more
# informations). You can use the precompiled package available on
# SliTaz mirror to build a distro without recompiling glibc.
#
genpkg_rules()
{
	# Mkdir's.
	for dir in `cat stuff/mkdir.list`
	do
		mkdir -p ${fs}$dir
	done
    # Copy all files specified in stuff/files.list. We get the files
    # from glibc package.
    for file in `cat stuff/wanted-files.list`
    do
    	cp -a ${_pkg}$file ${fs}$file
    done
}

# Call ldconfig and remove old glibc-2.3.6 (slitaz 1.0) and glibc-2.7
# files.
pre_install()
{
	rm -f $1/usr/lib/locale/locale-archive
}

post_install()
{
	local root
	rm -f $1/lib/*2.3.6.so
	rm -f $1/lib/*2.7.so
}
