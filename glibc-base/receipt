# SliTaz package receipt.

PACKAGE="glibc-base"
VERSION="2.7"
CATEGORY="base-system"
SHORT_DESC="GNU libc minimal libraries for SliTaz based system."
WANTED="glibc"
MAINTAINER="pankso@slitaz.org"

# Rules to gen a SliTaz package suitable for Tazpkg.
#
# Full glibc is very long to compile (see package glibc for more
# informations). You can use the precompiled package available on
# SliTaz mirror to build a distro without recompiling glibc.
#
genpkg_rules()
{
	# Mkdir's.
	for dir in `cat stuff/mkdir.list`
	do
		mkdir -p ${fs}$dir
	done
    # Copy all files specified in stuff/files.list. We get the files
    # from glibc package.
    for file in `cat stuff/wanted-files.list`
    do
    	cp -a ${_pkg}$file ${fs}$file
    done
    
    # Gen locale files
	mkdir -p $fs/usr/lib/locale
	#localedef -i fr_CH -c -f ISO-8859-1 $fs/usr/lib/locale/fr_CH
    localedef -i fr_FR -c -f ISO-8859-1 $fs/usr/lib/locale/fr_FR
}

# Call ldconfig and remove old glibc-2.3.6 files.
post_install()
{
	local root
	root=$1
	ldconfig
	rm -f $root/lib/*2.3.6.so
	rm -f $root/usr/lib/locale/locale-archive
}
