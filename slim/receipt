# SliTaz package receipt.

PACKAGE="slim"
VERSION="1.3.0"
CATEGORY="x-window"
SHORT_DESC="Desktop-independent graphical login manager for X11."
MAINTAINER="pankso@slitaz.org"
DEPENDS="jpeg libpng slitaz-configs"
TARBALL="$PACKAGE-$VERSION.tar.gz"
WEB_SITE="http://slim.berlios.de"
WGET_URL="http://download.berlios.de/slim/$TARBALL"

# Rules to configure and make the package.
compile_rules()
{
	cd $src
	sed -i "s|/usr/X11R6/include|/usr/include/xorg|g" Makefile
	sed -i "s|/usr/X11R6/|/usr/|g" Makefile
	make
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/bin $fs/usr/share/slim
	cp -a $src/slim $fs/usr/bin
	
	# Config file and rc script (theme is in slitaz-configs).
	cp -a stuff/etc $fs
}

post_install()
{
	( cd ./$1 ; cpio -o -H newc | gzip -9 ) > \
		$1/$INSTALLED/$PACKAGE/volatile.cpio.gz <<EOT
etc/slim.conf
EOT
}

repack_cleanup()
{
	zcat $INSTALLED/$PACKAGE/volatile.cpio.gz | ( cd $1 ; cpio -id )
}
