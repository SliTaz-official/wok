# SliTaz package receipt.

PACKAGE="qemu"
VERSION="0.9.1"
CATEGORY="misc"
SHORT_DESC="General-purpose full virtualizer for x86 hardware."
MAINTAINER="pascal.bellard@slitaz.org"
TARBALL="$PACKAGE-$VERSION.tar.gz"
WEB_SITE="http://bellard.org/$PACKAGE/"
WGET_URL="$WEB_SITE$TARBALL"
BUILD_DEPENDS="alsa-lib-dev gcc3 gettext libSDL-dev"
DEPENDS="alsa-lib gnutls libSDL libiconv zlib"

# Rules to configure and make the package.
compile_rules()
{
	cd $src
	[ -f done.virtio.u ] || patch -p1 < ../stuff/virtio.u
	touch done.virtio.u
	#./configure --prefix=/usr --enable-alsa --disable-gfx-check \

	./configure --prefix=/usr --enable-alsa \
		    --host-cc=gcc-3 --cc=gcc-3 \
		    --target-list="i386-softmmu,x86_64-softmmu" &&
	make &&
	make DESTDIR=$PWD/_pkg install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	cp -a $_pkg/usr $fs
}

