# SliTaz package receipt.

PACKAGE="fcitx"
VERSION="4.0.1"
CATEGORY="x-window"
SHORT_DESC="Free Chinese Input Toy of X, a collection of Simplified Chinese input methods for Linux."
MAINTAINER="lufeng369@gmail.com"
DEPENDS="dbus pango"
BUILD_DEPENDS="intltool xorg-libXrender-dev pkg-config cairo-dev pango-dev"
TARBALL="$PACKAGE-${VERSION}_all.tar.gz"
WEB_SITE="http://code.google.com/p/fcitx/"
WGET_URL="http://fcitx.googlecode.com/files/$TARBALL"

# Rules to configure and make the package.
compile_rules()
{
    cd $src
    ./configure \
        --prefix=/usr \
	--disable-table-data &&
    make && make DESTDIR=$PWD/_pkg install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
    mkdir -p $fs/usr
    cp -a $_pkg/usr $fs/
    sed -i \
        -e 's/DefaultValue=default/DefaultValue=classic/' \
        -e 's/DefaultValue=L_CTRL/DefaultValue=L_SHIFT/' \
        -e 's/DefaultValue=ALT_SPACE/DefaultValue=CTRL_./' \
        -e 's/DefaultValue=-/DefaultValue=,/' \
        -e 's/DefaultValue==/DefaultValue=./' $fs/usr/share/fcitx/data/config.desc

}
