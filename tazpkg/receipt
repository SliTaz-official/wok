# SliTaz package receipt.

PACKAGE="tazpkg"
VERSION="3.4"
CATEGORY="base-system"
SHORT_DESC="SliTaz packages manager."
MAINTAINER="pankso@slitaz.org"
DEPENDS="busybox"
TARBALL="$PACKAGE-$VERSION.tar.gz"
WEB_SITE="http://www.slitaz.org/"
WGET_URL="http://mirror.slitaz.org/sources/tazpkg/$TARBALL"
TAGS="slitaz package-manager"

# Rules to gen a SliTaz package suitable for Tazpkg.
#
# Tazpkg is SliTaz packages manager. On an other GNU/Linux install
# can be do with : make install from the sources directory.
#
genpkg_rules()
{
	mkdir -p \
		$fs/etc/slitaz \
		$fs/usr/bin \
		$fs/usr/lib/slitaz \
		$fs/usr/share/doc/$PACKAGE
	cp -a $src/tazpkg $fs/usr/bin
	cp -a $src/tazpkgbox $fs/usr/bin
	cp -a $src/tazpkg.conf $fs/etc/slitaz
	cp -a $src/lib/* $fs/usr/lib/slitaz
	cp -a $src/applications $fs/usr/share
	cp -a $src/pixmaps $fs/usr/share
	cp -a $src/mime $fs/usr/share
	cp -a $src/doc/*.html $fs/usr/share/doc/$PACKAGE
	chmod 755 $fs/usr/bin/$PACKAGE
	chown -R root.root $fs
	# Default icon for mimetype (freedesktop standard compliant file
	# manager will diplay a tazpkg icon for SliTaz packages).
	mkdir -p $fs/usr/share/icons/hicolor/32x32/mimetypes
	cd $fs/usr/share/icons/hicolor/32x32/mimetypes
	ln -s /usr/share/pixmaps/tazpkg.png package-x-tazpkg.png
	ln -s /usr/share/pixmaps/tazpkg.png gnome-mime-application-x-tazpkg.png
}

post_install()
{
	# update mime-cache
	echo "Updating mime-types database..."
	update-mime-database $1/usr/share/mime
}
