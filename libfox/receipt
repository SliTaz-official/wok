# SliTaz package receipt.

PACKAGE="libfox"
SOURCE="fox"
VERSION="1.6.33"
CATEGORY="x-window"
SHORT_DESC="FOX is a C++ based Toolkit for developing Graphical User Interfaces easily and effectively."
MAINTAINER="chadi.elahmad@gmail.com"

TARBALL="$SOURCE-$VERSION.tar.gz"
WEB_SITE="http://www.fox-toolkit.org/"
WGET_URL="http://www.fox-toolkit.org/ftp/$TARBALL"

DEPENDS="libpng jpeg zlib bzlib expat tiff
xorg-libX11 xorg-libXau xorg-libXdmcp 
xorg-libXft xorg-libXrender 
freetype fontconfig 
xorg-libXcursor xorg-libXfixes 
xorg-libXrandr xorg-libXext gcc-lib-base"


# BUILD_DEPENDS :
# Configure and compile : pkg-config expat-dev 
# Important utils : libpng-dev jpeg-dev tiff-dev zlib-dev bzip2-dev 
# Base X libs : xorg-libX11-dev xorg-xproto xorg-libXau-dev xorg-libXdmcp-dev 
# Anti-aliasing, otherwise it looks ugly : xorg-libXft-dev xorg-libXrender-dev xorg-renderproto xorg-kbproto 
# Dependency to xft : freetype-dev fontconfig-dev 
# Printing  support : cups-dev 
# Xcursor support : xorg-libXcursor-dev xorg-libXfixes-dev xorg-fixesproto 
# Xrandr and Xshape support : xorg-libXrandr-dev xorg-randrproto xorg-libXext-dev xorg-xextproto "
# OpenGL : Still not done

BUILD_DEPENDS=" 
pkg-config expat-dev 
libpng-dev jpeg-dev zlib-dev bzip2-dev 
xorg-libX11-dev xorg-xproto xorg-libXau-dev xorg-libXdmcp-dev 
xorg-libXft-dev xorg-libXrender-dev xorg-renderproto xorg-kbproto 
freetype-dev fontconfig-dev 
cups-dev 
xorg-libXcursor-dev xorg-libXfixes-dev xorg-fixesproto 
xorg-libXrandr-dev xorg-randrproto xorg-libXext-dev xorg-xextproto "

# Rules to configure and make the package.
compile_rules()
{
	cd $src
	./configure \
		--prefix=/usr \
		--mandir=/usr/share/man \
		--infodir=/usr/share/info \
		--with-x=yes --with-xft=yes --with-cups=yes \
		--with-xcursor=yes --with-xrandr=yes --with-shape=yes \
		--with-opengl=no --with-xshm=no --with-xim=no --with-profiling=no \
		--enable-release --disable-static \
		$CONFIGURE_ARGS &&
	make -j 4 &&
	make DESTDIR=$PWD/_pkg install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/lib $fs/usr/bin
	cp -a $_pkg/usr/lib/*.so* $fs/usr/lib
	cp -a $_pkg/usr/bin/fox-config $fs/usr/bin
	chmod +x $fs/usr/bin/*
}
