# SliTaz package receipt.

PACKAGE="slitaz-configs"
VERSION="3.1"
CATEGORY="base-system"
SHORT_DESC="SliTaz config files, wallpaper and login sound."
MAINTAINER="pankso@slitaz.org"
DEPENDS="slitaz-tools xorg-libXcomposite xorg-libXdamage xorg-xcompmgr \
transset-df tazlito tazpkg slitaz-doc lxtask lxpanel lxappearance \
ttf-dejavu pcmanfm slitaz-tools-boxes"
TARBALL="$PACKAGE-$VERSION.tar.gz"
WEB_SITE="http://www.slitaz.org/"
WGET_URL="http://mirror.slitaz.org/sources/configs/$TARBALL"

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{	
	# Copy rootfs files from the stuff and set permissions.
	mkdir -p $fs/etc/xdg/openbox
	cp -a $src/rootfs/etc/xdg/openbox/menu.en.xml $fs/etc/xdg/openbox
	cp -a $src/rootfs/etc/xdg/openbox/menu.xml $fs/etc/xdg/openbox
	cp -a $src/rootfs/etc/xdg/openbox/autostart.sh $fs/etc/xdg/openbox
	cp -a $src/rootfs/etc/xdg/openbox/rc.xml $fs/etc/xdg/openbox
	cp -a $src/rootfs/etc/skel $fs/etc
	cp -a $src/rootfs/etc/X11 $fs/etc
	mkdir $fs/etc/skel/Music $fs/etc/skel/Documents
	cp -a $src/rootfs/usr $fs
	cp -a $src/rootfs/root $fs
	chown -R root.root $fs
	chmod 0750 $fs/root
}

post_install()
{
	# By default slim provide a base theme and config file have both
	# base and slitaz who will be choose randomly, so make sure we use
	# only slitaz theme.
	if grep -q 'current_theme       slitaz,base' $1/etc/slim.conf; then
		sed -i s/"current_theme .*"/"current_theme       slitaz"/ \
			$1/etc/slim.conf
	fi
}
