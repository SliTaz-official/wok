# SliTaz package receipt.

PACKAGE="alsa-utils"
VERSION="1.0.15"
CATEGORY="multimedia"
SHORT_DESC="Alsa sound system utilities et config tools."
MAINTAINER="pankso@slitaz.org"
DEPENDS="alsa-lib bash"
TARBALL="$PACKAGE-$VERSION.tar.bz2"
WEB_SITE="http://www.alsa-project.org/"
WGET_URL="ftp://ftp.alsa-project.org/pub/utils/$TARBALL"
JWM_MENU='Multimedia:<Program icon="audio-card.png" label="Alsamixer">xterm -bg black -fg white -e alsamixer</Program>'

# Rules to configure and make the package.
compile_rules()
{
	cd $src
	./configure --prefix=/usr --infodir=/usr/share/info \
	--mandir=/usr/share/man $CONFIGURE_ARGS
	make
	make DESTDIR=$PWD/_pkg install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/share
	cp -a $_pkg/usr/bin $fs/usr
	cp -a $_pkg/usr/sbin $fs/usr
	chmod 755 $fs/usr/sbin/*
	cp -a $_pkg/usr/share/alsa $fs/usr/share

	# For conf we need /var/tmp
	mkdir -p $fs/var/tmp
	chmod 1777 $fs/var/tmp

	# Strip me this and remove alsaconf (use soundconf).
	strip -s $fs/usr/bin/*
	rm $fs/usr/sbin/alsaconf
	strip -s $fs/usr/sbin/*
	
	# Getopt precomp needed by alsaconf (and change /bin/bash to sh : 
	# do not work, we need Bash or modify alsaconf).
	install -g root -o root -m 0755 stuff/getopt $fs/usr/bin
}

