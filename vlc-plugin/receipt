# SliTaz package receipt.

PACKAGE="vlc-plugin"
VERSION="2.0.0"
CATEGORY="multimedia"
SHORT_DESC="VLC Web Browser Plug-in that will allow to play video and audio"
MAINTAINER="domcox@slitaz.org"
WEB_SITE="http://www.videolan.org/vlc"
SOURCE="npapi-vlc"
TARBALL="$SOURCE-$VERSION.tar.xz"
WGET_URL="http://download.videolan.org/pub/videolan/vlc/$VERSION/$TARBALL"

DEPENDS="libvlc dbus"
BUILD_DEPENDS="firefox-dev libvlc-dev dbus-dev gtk+-dev"

[ -f /etc/slitaz/slitaz.conf ] && . /etc/slitaz/slitaz.conf
[ $INSTALLED ] || INSTALLED=/var/lib/tazpkg/installed


# Rules to configure and make the package.
compile_rules()
{
	./configure $CONFIGURE_ARGS && make && make install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	cp -a $install/* $fs
}

post_install()
{
	echo -n "Processing post install commands..."
	if [ -d \$1/$INSTALLED/firefox ] ; then
		mkdir -p \$1/usr/lib/firefox/plugins
		ln -s /usr/lib/mozilla/plugins/libvlcplugin.so \$1/usr/lib/firefox/plugins
	fi
	status
}

post_remove()
{
	echo -n "Processing post remove commands..."
	if [ -d $INSTALLED/firefox ] ; then
		rm -f /usr/lib/firefox/plugins/libvlcplugin.so
	fi
	status
}
