# SliTaz package receipt

PACKAGE="locale-ru"
VERSION="1.1"
CATEGORY="system-tools"
SHORT_DESC="Russian locale pack."
MAINTAINER="pankso@slitaz.org"
DEPENDS="glibc-base"
BUILD_DEPENDS="glibc glibc-locale slitaz-i18n"
WEB_SITE="http://www.slitaz.org/"

LOCALE="ru"
LOCALEDEF="ru_RU"
CHARMAP="UTF-8"

# Rules to configure and make the package.
compile_rules()
{
	. $WOK/slitaz-i18n/stuff/locale-pack.conf
	# Ensure packages are built.
	for pkg in $CORE_PKGS
	do
		[ -d $WOK/$pkg/taz ] || tazwok cook $pkg
	done
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	. $WOK/slitaz-i18n/stuff/locale-pack.functions
	. $WOK/slitaz-i18n/stuff/locale-pack.conf
	PKG_NAME="$PACKAGE"
	PKG_VERS="$VERSION"
	mk_locale_dir
	get_slitaz_messages
	get_core_messages
	PACKAGE="$PKG_NAME"
	VERSION="$PKG_VERS"
}

# Back to C if it's the last used locale.
post_remove()
{
	if grep -q $LOCALEDEF /etc/locale.conf; then
		echo "LANG=C" > /etc/locale.conf
		echo "LC_ALL=C" >> /etc/locale.conf
	fi
}
