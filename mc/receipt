# SliTaz package receipt.

PACKAGE="mc"
VERSION="4.8.13"
CATEGORY="system-tools"
SHORT_DESC="Midnight Commander - ncurses based file manager."
MAINTAINER="erjo@slitaz.org"
LICENSE="GPL3"
TARBALL="$PACKAGE-$VERSION.tar.xz"
WEB_SITE="http://www.midnight-commander.org/"
WGET_URL="http://www.midnight-commander.org/downloads/$TARBALL"
HOST_ARCH="i486 arm"

SUGGESTED="gpm"
DEPENDS="ncursesw glib e2fsprogs"
BUILD_DEPENDS="gpm-dev glib-dev ncursesw-dev"
GENERIC_MENUS="no"

# Rules to configure and make the package.
compile_rules()
{
	./configure \
		--prefix=/usr \
		--with-gpm-mouse \
		--with-screen=ncurses \
		--libexecdir=/usr/lib \
		--sysconfdir=/etc \
		$CONFIGURE_ARGS &&
	make && make install
}

# Rules to gen a SliTaz package suitable for Tazpkg. --enable-vfs-sftp
genpkg_rules()
{
	mkdir -p $fs/usr/share/applications
	cp -a $install/etc $fs/
	cp -a $install/usr/bin $fs/usr
	cp -a $install/usr/lib $fs/usr
	cp -a $install/usr/share/mc $fs/usr/share

	sed 's#|profile|#&receipt|#' -i $fs/usr/share/mc/syntax/Syntax
	cp -a $stuff/*.desktop $fs/usr/share/applications
	chown -R root:root $fs
}
