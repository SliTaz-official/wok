# SliTaz package receipt.

PACKAGE="faenza-icon-theme"
VERSION="1.3"
CATEGORY="x-window"
SHORT_DESC="Faenza icon theme"
MAINTAINER="al.bobylev@gmail.com"
LICENSE="GPL3"
TARBALL="${PACKAGE}_$VERSION.zip"
WEB_SITE="http://tiheum.deviantart.com/art/Faenza-Icons-173323228"
WGET_URL="http://dl.dropbox.com/u/9966975/$TARBALL"

DEPENDS=""

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p $fs/usr/share/icons
	cd $fs/usr/share/icons
	tar xf $src/Faenza.tar.gz
	tar xf $src/Faenza-Dark.tar.gz
	tar xf $src/Faenza-Darkest.tar.gz
	tar xf $src/Faenza-Darker.tar.gz
	# remove big sizes and scalable
	rm -rf $(find . -type d -regex '.*/\(64\|96\|scalable\)')
	# remove emblems and extras
	rm -rf $(find . -type d -regex '.*/\(emblems\|extras\)')
#	sed -i '/Directories=/ s/\(.+\)\(,actions\/64.*\)/\1/' Faenza/index.theme

	for name in Faenza Faenza-Dark Faenza-Darkest Faenza-Darker; do
		cp -f $stuff/${name}-index.theme $fs/usr/share/icons/${name}/index.theme
	done
}

qtfix="usr/share/icons/hicolor/index.theme"

post_install()
{
	sed '/Inherits=/s|=.*$|=Faenza|' -i $1/$qtfix
}

pre_remove()
{
	sed '/Inherits=/s|=.*$|=SliTaz|' -i $1/$qtfix
}
