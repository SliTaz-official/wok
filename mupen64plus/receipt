# SliTaz package receipt.

PACKAGE="mupen64plus"
VERSION="2.5"
CATEGORY="games"
SHORT_DESC="Nintendo64 Emulator"
MAINTAINER="slaxemulator@gmail.com"
LICENSE="GPL2"
TARBALL="$PACKAGE-bundle-src-$VERSION.tar.gz"
WEB_SITE="http://www.mupen64plus.org/"
WGET_URL="https://github.com/mupen64plus/mupen64plus-core/releases/download/$VERSION/$TARBALL"
TAGS="emulator nintendo64"

DEPENDS="bzlib freetype libboost-filesystem libglu-mesa libsamplerate libsdl \
speex"
BUILD_DEPENDS="gtk+-dev libboost-filesystem-dev libglu-mesa libglu-mesa-dev \
libsamplerate-dev libsdl-dev libsdl-ttf-dev mesa-dev speex-dev yasm zlib-dev"

# Rules to configure and make the package.
compile_rules()
{
	find $src -name Makefile | xargs sed -i 's|uname -m|echo i486|'
	export PREFIX=/usr DESTDIR=$install
	./m64p_build.sh &&
	./m64p_install.sh
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	cp -a $install/* $fs
	rm -r $fs/usr/include
	find $fs -name '*.so*' -exec chmod a+x \{\} \;
}
