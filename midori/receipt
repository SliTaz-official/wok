# SliTaz package receipt.

PACKAGE="midori"
VERSION="0.2.2"
CATEGORY="x-window"
SHORT_DESC="Light Web Browse using GTK+/WebKit."
MAINTAINER="pankso@slitaz.org"
TARBALL="$PACKAGE-$VERSION.tar.bz2"
DEPENDS="libsexy libwebkit libsoup icu curl libssl sqlite xorg-libXdamage \
gnutls libnotify gcc-lib-base"
BUILD_DEPENDS="python libsexy-dev libsexy libwebkit-dev libwebkit libsoup-dev \
icu-dev icu curl-dev sqlite-dev"
WEB_SITE="http://software.twotoasts.de/?page=midori"
WGET_URL="http://archive.xfce.org/src/apps/$PACKAGE/0.2/$TARBALL"

# Rules to configure and make the package.
compile_rules()
{
	cd $src
    #patch -p 0 < ../stuff/midori-websettings.patch || exit 1
	./waf configure --prefix=/usr
	./waf build
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	mkdir -p \
		$fs/usr/bin \
		$fs/usr/lib/midori \
		$fs/usr/share/pixmaps \
		$fs/usr/share/applications \
		$fs/usr/share/icons/hicolor/22x22/categories \
		$fs/usr/share/icons/hicolor/22x22/status
	cp -a $src/_build_/default/midori/midori $fs/usr/bin
	cp -a $src/_build_/default/extensions/*.so $fs/usr/lib/midori

	for i in de es fr
	do
		mkdir -p $fs/usr/share/locale/$i/LC_MESSAGES
		cp -a $src/_build_/default/po/$i.mo \
			$fs/usr/share/locale/$i/LC_MESSAGES/midori.mo
	done
	cp $src/icons/22x22/midori.png $fs/usr/share/pixmaps
	cp $src/icons/22x22/extension.png $fs/usr/share/icons/hicolor/22x22/categories
	cp $src/icons/22x22/news-feed.png $fs/usr/share/icons/hicolor/22x22/status
}
