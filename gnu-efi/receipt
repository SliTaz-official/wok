# SliTaz package receipt.

PACKAGE="gnu-efi"
VERSION="3.0i"
CATEGORY="development"
SHORT_DESC="Development files for EFI applications."
MAINTAINER="pascal.bellard@slitaz.org"
TARBALL="${PACKAGE}_$VERSION.orig.tar.gz"
WEB_SITE="http://gnu-efi.sourceforge.net/"
WGET_URL="$SF_MIRROR/$PACKAGE/$TARBALL"

# Rules to configure and make the package.
compile_rules()
{
	KERNEL_VERSION=`grep  ^VERSION= $WOK/linux/receipt | cut -d "=" -f2 | sed -e 's/"//g'`
	if [ ! -d $WOK/linux/linux-$KERNEL_VERSION ]; then
        	tazwok cook linux
	fi
	cd $src
	sed -i "s|^INSTALLROOT.*|INSTALLROOT=$PWD/_pkg/usr|" Make.defaults
	sed -i "s|^LINUX_HEADERS.*|LINUX_HEADERS=$WOK/linux/linux-$KERNEL_VERSION|" apps/Makefile
	make && make install
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	cp -a $_pkg/* $fs
}

