# SliTaz package receipt.

PACKAGE="emacs-pkg-lua-mode"
VERSION="20100404"
CATEGORY="development"
SHORT_DESC="An Emacs major mode for editing Lua code."
MAINTAINER="domcox@slitaz.org"
DEPENDS="emacs"
BUILD_DEPENDS="emacs"
SOURCE="lua-mode"
TARBALL="$SOURCE-$VERSION.tar.gz"
WEB_SITE="http://lua-mode.luaforge.net"
WGET_URL="http://luaforge.net/frs/download.php/2724/$TARBALL"
TAGS="emacs lua"

# Rules to configure and make the package.
compile_rules()
{
	echo -n "Byte-compilating lua-mode.el"
	emacs -batch -f batch-byte-compile $WOK/$PACKAGE/$SOURCE.el 2> /dev/null
	status
}

# Rules to gen a SliTaz package suitable for Tazpkg.
genpkg_rules()
{
	echo -n "Installing lua-mode"
	mkdir -p $fs/usr/share/emacs/site-lisp/lua-mode && \
	cp $WOK/$PACKAGE/*.elc $fs/usr/share/emacs/site-lisp/lua-mode
	status
	echo -n "Installing start file"
	mkdir -p $fs/usr/share/emacs/site-lisp/site-start.d && \
	cp stuff/*.el $fs/usr/share/emacs/site-lisp/site-start.d
	status
}

post_install()
{
	tazpkg reconfigure emacs
}

post_remove()
{
	tazpkg reconfigure emacs
}
